(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 14.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    210190,       5296]
NotebookOptionsPosition[    195958,       5023]
NotebookOutlinePosition[    198816,       5082]
CellTagsIndexPosition[    198729,       5077]
WindowTitle->BosonTransform
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "7e4651ff-e98b-4489-8161-5e43bbff2d1b"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "3ecf152e-b815-4235-acdd-632d4df4d932"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "9e2cee75-1fed-4870-8438-75f61c6e4f27"]
         }],ExpressionUUID->"3abbe4bf-dae0-4c4d-b808-65f9a1563db7"],
         StripOnInput->False],{
        "\"BosonBasis\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/BosonBasis"], "\"MatrixIn\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/MatrixIn"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "f4720803-e91b-4de5-81fc-2edc93545962"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "c8cabf59-9066-48e9-a608-4b85a2e9ef02"]
         }],ExpressionUUID->"dc6b8681-aaf6-4d43-8f5c-9189ef016fec"],
         StripOnInput->False],{
        "\"Quantum Many-Body Systems\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/QuantumManyBodySystems"], 
         "\"Q3\"" :> Documentation`HelpLookup["paclet:Q3/guide/Q3"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "d77abc4c-9ce3-40f7-a73b-29ef39bcb099"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "d6a9183f-0b83-4f87-a0ed-5cb3f46d332b"]
         }],ExpressionUUID->"574116ae-372b-4f67-8821-5260dcac3640"],
         StripOnInput->False],{
        "\"Quantum Many-Body Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumManyBodySystems"], "\"Q3: Quick Start\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "19190072-e8aa-4cc0-9201-bed4a5161eab"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "82bc6077-1375-49fe-8449-f19d2f9c5741"]
         }],ExpressionUUID->"faec082a-ea9d-482b-868f-a224fbe3f813"],
         StripOnInput->False],{
        "\"Q3/ref/BosonTransform\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/BosonTransform"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
BosonTransform.html"], StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[False], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/BosonTransform" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "63bfcd5c-e86f-4952-a954-05c0c7e7c5bc"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "a650414f-6153-4965-afda-5f7c8f4432a7"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"8f680c25-a1fa-46c5-b115-3848b91f12ea"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"b4e235be-da11-4667-ba0c-254803242329"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "BosonTransform", "ObjectName",ExpressionUUID->
      "09dae67b-82d6-4d87-bd3e-a8dc9874992f"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"94ed8bc8-66aa-4539-a82b-891ff6d199f9"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "62e3e3b2-4601-4058-aaae-8822c8883e9c"]
    }],ExpressionUUID->"cd3b2f92-110e-4251-8caa-d169cdd450d5"], Cell[BoxData[
     TooltipBox[
      StyleBox[
       TagBox[
        StyleBox[
         GraphicsBox[InsetBox[
           StyleBox["\<\"NEW IN 14.0\"\>",
            StripOnInput->False,
            FontFamily->"Source Sans Pro",
            FontSize->18,
            FontWeight->"Bold",
            FontSlant->"Italic",
            FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
           Right, Center}],
          AxesStyle->Large,
          FrameStyle->Large,
          ImageSize->{125, 24},
          PlotRangePadding->Scaled[0.025]], "NewInGraphic",
         StripOnInput->False],
        Deploy,
        DefaultBaseStyle->"Deploy"], "NewInGraphic",
       StripOnInput->False],
      "New in 14",
      TooltipDelay->0.3]],
     Magnification->1,ExpressionUUID->
     "621d5a59-6505-4067-951c-8d844b44fd24"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"fc065d3f-e3a8-45ee-889a-00412cb6121c"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         StyleBox["n", "TI"], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "306e3b5d-f62b-4fa6-91b5-9691912709a9"],
     " \[LineSeparator]returns the unitary matrix describing the change of ",
     Cell[BoxData[
      StyleBox["n", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8baf11bb-36c6-448e-9e88-da3a2df7a3d3"],
     "-particle basis between two sets of modes related by the canonical \
transformation matrix ",
     Cell[BoxData[
      StyleBox["mat", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "bb592f8b-9777-473c-93d8-656e70763310"],
     "."
    }],ExpressionUUID->"881795b6-dca9-402f-846c-d3893aa2fc0f"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{
          StyleBox["m", "TI"], ",", 
          StyleBox["n", "TI"]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8978f58c-36be-4e93-9f00-62302b95f8d3"],
     "\[LineSeparator]returns an association whose keys are the numbers from ",
     Cell[BoxData[
      StyleBox["m", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "c865579c-2dfd-4db5-9647-89c33843c4e6"],
     " to ",
     Cell[BoxData[
      StyleBox["n", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "f5eadd1e-8855-43df-a41e-a1a6a359733d"],
     " and the values are the unitary matrices corresponding to the numbers \
of particles."
    }],ExpressionUUID->"816d08b6-e974-4f4a-8de9-d53dd08bff98"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        StyleBox["n", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "77dae9d1-abaa-4682-bc8a-0ed55eeeb6f0"],
     "\[LineSeparator]is equivalent to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{"0", ",", 
          StyleBox["n", "TI"]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "bd19173e-3364-4dd6-8550-85e4f608eb85"],
     "."
    }],ExpressionUUID->"883c63a5-9642-471e-bd1b-803f6959d2f7"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        StyleBox["nspec", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["k", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["k", "TI"], 
           StyleBox["2", "TR"]], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "1320b388-bf7c-4be6-9a5d-1d293ad5c416"],
     "\[LineSeparator]assumes that the basis states only have occupation \
numbers in ",
     Cell[BoxData[
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["k", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["k", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9bc00143-53c7-40f1-9b48-f84510d82e95"],
     "."
    }],ExpressionUUID->"4a45bdff-8167-49b3-8cab-da12d1b414e2"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            SubscriptBox[
             StyleBox["p", "TI"], 
             StyleBox["11", "TR"]], ",", 
            SubscriptBox[
             StyleBox["p", "TI"], 
             StyleBox["12", "TR"]], ",", 
            StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{
            SubscriptBox[
             StyleBox["p", "TI"], 
             StyleBox["21", "TR"]], ",", 
            SubscriptBox[
             StyleBox["p", "TI"], 
             StyleBox["22", "TR"]], ",", 
            StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "22ac6d49-a89d-49ed-a901-61e8d7b1b08d"],
     "\[LineSeparator]refers to ",
     Cell[BoxData[
      SubscriptBox[
       StyleBox["p", "TI"], 
       StyleBox["ij", "TI"]]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "f007feda-967a-4df2-a933-4832c1e95bcf"],
     " for the occupation number of ",
     Cell[BoxData[
      StyleBox["j", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "968d7195-ab02-4048-a87c-4cea6bc324d0"],
     "-th mode in the ",
     Cell[BoxData[
      StyleBox["i", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "f438198e-450f-4b54-ad07-7b63dc1572df"],
     "-th many-body basis state for the both sets of boson modes."
    }],ExpressionUUID->"69d968a5-f3f2-40eb-be1d-0ac8920296a8"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{
          StyleBox["pmat", "TI"], ",", 
          StyleBox["qmat", "TI"]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "81755ecf-459f-4d58-ab00-42d969a1905f"],
     "\[LineSeparator]refers to ",
     Cell[BoxData[
      StyleBox["pmat", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "c8aac386-2b8f-428a-af70-1b13a85e978c"],
     " and ",
     Cell[BoxData[
      StyleBox["qmat", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "be49dbd1-0c8c-4fe6-8490-816079d77624"],
     " for the occupation numbers of the first and second set of boson modes, \
respectively."
    }],ExpressionUUID->"c9335cb9-61b0-46ff-8970-27c0dce0205b"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        StyleBox["bs", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "e286ae1c-11e2-4806-9d45-7262d5291db5"],
     " or ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["BosonTransform"]], "paclet:Q3/ref/BosonTransform", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["mat", "TI"], ",", 
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["bs", "TI"], 
           StyleBox["a", "TI"]], ",", 
          SubscriptBox[
           StyleBox["bs", "TI"], 
           StyleBox["b", "TI"]]}], "}"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "ece2b1c0-b86b-46b6-b81a-26f8e7ef3565"],
     "\[LineSeparator]refers to the same basis ",
     Cell[BoxData[
      StyleBox["bs", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "e2b97132-f3e5-4eda-8412-bc27f9271420"],
     " or respective bases ",
     Cell[BoxData[
      SubscriptBox[
       StyleBox["bs", "TI"], 
       StyleBox["a", "TI"]]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "831eea62-eb1f-4251-8e3d-23b53eb76cd1"],
     " and ",
     Cell[BoxData[
      SubscriptBox[
       StyleBox["bs", "TI"], 
       StyleBox["b", "TI"]]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "a4fc5e3b-9cef-494b-afcd-3414a1df6357"],
     " for the occupation numbers of the two sets of boson modes."
    }],ExpressionUUID->"faeb4332-849a-413e-9edd-f44f8049af37"]}
  }]], "Usage",
 CellID->1362242420,ExpressionUUID->"c48acd75-44e1-469a-8f3d-edf6c1939750"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"1ceed1e2-5883-4317-ab08-b6499c8d0e90"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"a6d7b15a-70bf-49cf-815c-a9b3840305bd"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"adae5c7f-9c31-4c00-b817-b5acd35a356d"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"1ed6f3b5-4d8e-41a0-8005-da85a9a68239"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->506438356,ExpressionUUID->"d719181e-5e30-41d8-80e4-0a0c91d35de6"],

Cell[TextData[{
 "The unitary matrix ",
 Cell[BoxData[
  StyleBox["mat", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "6c1e84bf-a520-4bb1-9949-6f8c377c667a"],
 ", denoted by ",
 Cell[BoxData[
  FormBox[
   SubscriptBox["U", 
    RowBox[{"m", "\[Times]", "m"}]], TraditionalForm]],ExpressionUUID->
  "5d6af768-2917-426e-8cdd-d28d43454dcd"],
 ", describes a canonical transformation from one set of ",
 Cell[BoxData[
  StyleBox["m", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3ea8a6a0-ed68-4aa3-85a5-f6b74630925e"],
 " bosonic modes ",
 Cell[BoxData[
  SubscriptBox[
   StyleBox["a", "TI"], 
   StyleBox["i", "TI"]]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3cd8d248-a3a7-461e-8ff0-b6fac50bd922"],
 " to another of ",
 Cell[BoxData[
  SubscriptBox[
   StyleBox["b", "TI"], 
   StyleBox["j", "TI"]]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3607cc8a-7a6b-45cf-85ad-881ae23bb59a"],
 " by\[LineSeparator]\t ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubsuperscriptBox["b", "j", "\[Dagger]"], "=", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"i", "=", "1"}], "m"], 
     RowBox[{
      SubsuperscriptBox["a", "i", "\[Dagger]"], 
      SubscriptBox["U", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}]]}]}]}], TraditionalForm]],
  ExpressionUUID->"599b6e1c-6e34-4645-b424-91d961bd8734"],
 ", \[LineSeparator]or equivalently, \[LineSeparator]\t",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["b", "i"], "=", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"j", "=", "1"}], "m"], 
     RowBox[{
      SubsuperscriptBox["U", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}], "\[Dagger]"], 
      SubscriptBox["a", "j"]}]}]}], TraditionalForm]],ExpressionUUID->
  "f462f7c5-7914-481a-9411-b0174d444324"],
 "."
}], "Notes",
 CellID->885192273,ExpressionUUID->"ef331946-a381-4388-aada-56c82d96a858"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "78c92291-5d6a-4ff1-b5ac-ceb7885b6810"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"387df64f-78d2-4257-8ed6-c90362a9a36f"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(2)", "ExampleCount",ExpressionUUID->
  "18b9b5b8-7b65-485e-871b-eeb0313038c5"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->1231756231,ExpressionUUID->"bd284b59-1c0b-4f4d-8198-901524e13c8c"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->246560494,ExpressionUUID->"00427fec-d980-430f-ad78-6086f51e28f7"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "b3b205fa-5d3f-4812-92db-2fae9edde638"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"6d5b3790-fc5a-48cd-b275-3a956ff3bbb5"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "f24a32a5-4225-43b8-95aa-6d4aabaa60b8"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->384617337,ExpressionUUID->"f347e3e3-6d1c-4ef8-be5a-07ac9344cc55"],

Cell[TextData[{
 "Consider two sets of ",
 StyleBox["m",
  FontSlant->"Italic"],
 " bosonic modes describing the same system. Typically, one set consists of \
the bare mores and the other, the normal modes."
}], "ExampleText",
 CellID->899584544,ExpressionUUID->"3dec2cbe-9e06-4520-bcce-d966a334f4b9"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"$m", "=", "3"}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"the", " ", "number", " ", "of", " ", "modes"}], " ", 
   "*)"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->766874085,ExpressionUUID->"1041fbe5-32b0-4a74-b159-54d85765ce2d"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Boson", ",", "a", ",", "b"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->652243378,ExpressionUUID->"70ecfc12-2a1b-43c9-9628-1471db51765f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"aa", "=", 
  RowBox[{"a", "[", 
   RowBox[{"Range", "@", "$m"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bb", "=", 
  RowBox[{"b", "[", 
   RowBox[{"Range", "@", "$m"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1535286693,ExpressionUUID->"2d8e2ff2-2657-4e3a-8428-2a3e82a97dde"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`a[3]]}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->2064056772,ExpressionUUID->"136cefa9-ac2f-41c8-83c5-f70529bac4b4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`b[1]], ",", 
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`b[2]], ",", 
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`b[3]]}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->151333366,ExpressionUUID->"6555c06e-7967-48f1-8b02-2294630121c2"]
}, Open  ]],

Cell[TextData[{
 "Consider a canonical transformation from one set of bosonic modes to \
another, ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubsuperscriptBox["b", "j", "\[Dagger]"], "=", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"i", "=", "1"}], "m"], 
     RowBox[{
      SubsuperscriptBox["a", "i", "\[Dagger]"], 
      SubscriptBox["U", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}]]}]}]}], TraditionalForm]],
  ExpressionUUID->"f4029135-8855-4880-b14b-a4f09a410f17"],
 ", or equivalently, ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox["b", "i"], "=", 
    RowBox[{
     UnderoverscriptBox["\[Sum]", 
      RowBox[{"j", "=", "1"}], "m"], 
     RowBox[{
      SubsuperscriptBox["U", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}], "\[Dagger]"], 
      SubscriptBox["a", "j"]}]}]}], TraditionalForm]],ExpressionUUID->
  "dd199f7a-802f-4b25-bcc8-09630c142e68"],
 "."
}], "ExampleText",
 CellID->629436858,ExpressionUUID->"4e9d5460-1245-49be-bc67-301b8e400446"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SeedRandom", "[", "351", "]"}], ";"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1888739657,ExpressionUUID->"392661d2-0bd6-42b7-9d57-1338cdf3a60a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{"RandomUnitary", "[", "$m", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->11107004,ExpressionUUID->"11dddbc4-a412-4853-81e5-b8cff81ba8d4"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.4191284361691052`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.6117560686759916`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.5861615594437507`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.12627636363737033`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2889187746613189`"}], "+", 
       RowBox[{"0.08414698032449486`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.168578059913452`"}], "+", 
       RowBox[{"0.4919636264922742`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2521003326969526`"}], "-", 
       RowBox[{"0.587585682717477`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.4378678821476611`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.35918440031191584`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.4224341714848938`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.034474122451396076`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.21992710304705768`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4281231870406507`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.7418577137282683`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.19583320527538056`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[5]//MatrixForm=",
 CellID->393314979,ExpressionUUID->"a665f73a-aee9-477b-8d1a-fed47fdc42b0"]
}, Open  ]],

Cell[TextData[{
 "Suppose that you are interested in the subspace of ",
 StyleBox["n",
  FontSlant->"Italic"],
 " particles."
}], "ExampleText",
 CellID->538544441,ExpressionUUID->"3e1113ef-c80f-4497-a811-9340791c93dd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$n", "=", "2"}], ";"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->554860242,ExpressionUUID->"f1834c2c-8194-41c5-af96-fc5812948147"],

Cell["\<\
The relevant bases in terms of two different sets of modes are as follows.\
\>", "ExampleText",
 CellID->1920304077,ExpressionUUID->"1c48075f-5edf-481d-be46-519cb52c000e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"as", "=", 
  RowBox[{"BosonBasis", "[", 
   RowBox[{"aa", ",", 
    RowBox[{"{", "$n", "}"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bs", "=", 
  RowBox[{"BosonBasis", "[", 
   RowBox[{"bb", ",", 
    RowBox[{"{", "$n", "}"}]}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1633870097,ExpressionUUID->"e3a17528-bb2d-4c43-a524-3bf2c3b4be7d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
      2|>]]}], "}"}]], "Output",
 CellLabel->"Out[7]=",
 CellID->1941762198,ExpressionUUID->"ec585336-2c20-4847-b111-bb6e752c0baa"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 2, $CellContext`b[2] -> 0, $CellContext`b[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 1, $CellContext`b[2] -> 1, $CellContext`b[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 1, $CellContext`b[2] -> 0, $CellContext`b[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 0, $CellContext`b[2] -> 2, $CellContext`b[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 0, $CellContext`b[2] -> 1, $CellContext`b[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["2", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 0, $CellContext`b[2] -> 0, $CellContext`b[3] -> 
      2|>]]}], "}"}]], "Output",
 CellLabel->"Out[7]=",
 CellID->2035761974,ExpressionUUID->"72279aec-75c7-4a6b-b968-45c59b72169b"]
}, Open  ]],

Cell[TextData[{
 "Calculate the unitary transformation matrix ",
 Cell[BoxData[
  FormBox["T", TraditionalForm]],ExpressionUUID->
  "04726ec5-d43e-425e-885f-49203ca40e06"],
 " between these bases: ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox[
     TemplateBox[{"j"},
      "Ket"], "b"], ":=", 
    RowBox[{
     UnderscriptBox["\[Sum]", "i"], 
     RowBox[{
      SubscriptBox[
       TemplateBox[{"i"},
        "Ket"], "a"], 
      SubscriptBox["T", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}]]}]}]}], TraditionalForm]],
  ExpressionUUID->"0513e33e-855d-4a70-b793-22b1b1455614"],
 "."
}], "ExampleText",
 CellID->2129672373,ExpressionUUID->"8a51be32-5070-49a2-8e9c-6ec1fb0caa77"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", 
     RowBox[{"{", "$n", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"trs", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->1631252586,ExpressionUUID->"b363ed2d-e700-47f3-8994-746a191a4a51"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"-", "0.19857684155634492`"}], "+", 
       RowBox[{"0.5128087287622562`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.4566881808087296`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.43227117110224134`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.24405295588932302`"}], "-", 
       RowBox[{"0.20008211665616923`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3276396537560523`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.14803670046113426`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2244743071976545`"}], "+", 
       RowBox[{"0.12134990038745952`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.07639334405406703`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.048623284893606324`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.525546639610581`"}], "+", 
       RowBox[{"0.14575916533166222`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.3139125707667611`"}], "-", 
       RowBox[{"0.4420631156714774`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.13616609523411619`"}], "+", 
       RowBox[{"0.19886724412884488`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.280217829290626`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.3450364067803739`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.2587652357502606`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.315621015170005`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.27981325312736616`"}], "+", 
       RowBox[{"0.16829845125673198`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.21360964750724648`"}], "-", 
       RowBox[{"0.16586854740410745`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.46890989756572976`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03531310991837402`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.14550948290070728`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.3902744082280407`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2817023567886494`"}], "+", 
       RowBox[{"0.29626109220208396`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.45458233239694923`"}], "-", 
       RowBox[{"0.23579803799054824`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.06271484878904743`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3145506253301126`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.07672549636379375`"}], "+", 
       RowBox[{"0.3021238564273962`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.3744482159866003`"}], "-", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.27734900090780473`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3353892526419486`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.05201717903027547`"}], "-", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.35991089371262064`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.49810410286173734`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.17726216411933482`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.029126094710848555`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.152259740115085`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.24504371127569793`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.4336471929249817`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.15316149465089865`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.13492153262717288`"}], "+", 
       RowBox[{"0.1883117845462479`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3493041792214004`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.38825459820187286`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.5120022231297038`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.2905607478753449`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[8]//MatrixForm=",
 CellID->991264631,ExpressionUUID->"c5fc2ba8-8ae5-437d-919a-3d72a968a3bb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"trs", ".", 
    RowBox[{"Topple", "[", "trs", "]"}]}], "//", "Chop"}], "//", 
  "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Topple", "[", "trs", "]"}], ".", "trs"}], "//", "Chop"}], "//", 
  "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[9]:=",
 CellID->1586342386,ExpressionUUID->"961c4214-2e84-4dff-867d-791aaf17de9f"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1.0000000000000007`", "0", "0", "0", "0", "0"},
     {"0", "1.`", "0", "0", "0", "0"},
     {"0", "0", "1.0000000000000007`", "0", "0", "0"},
     {"0", "0", "0", "0.9999999999999994`", "0", "0"},
     {"0", "0", "0", "0", "0.9999999999999999`", "0"},
     {"0", "0", "0", "0", "0", "1.`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[9]//MatrixForm=",
 CellID->4860437,ExpressionUUID->"c4961182-cad6-47d8-b866-93d489c83bd1"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1.0000000000000004`", "0", "0", "0", "0", "0"},
     {"0", "1.`", "0", "0", "0", "0"},
     {"0", "0", "1.`", "0", "0", "0"},
     {"0", "0", "0", "1.`", "0", "0"},
     {"0", "0", "0", "0", "0.9999999999999998`", "0"},
     {"0", "0", "0", "0", "0", "1.`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[9]//MatrixForm=",
 CellID->84986073,ExpressionUUID->"98ac2a8a-dbce-46be-b570-adbab965bd95"]
}, Open  ]],

Cell["\<\
Now, let us verify the above unitary matrix by manually constructing the \
canonical transformation.\
\>", "ExampleText",
 CellID->1291576865,ExpressionUUID->"5d3caf54-fc90-40b5-a799-c87929e2e3de"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"rls", "=", 
  RowBox[{"TransformBy", "[", 
   RowBox[{
    RowBox[{"bb", "->", "aa"}], ",", 
    RowBox[{"Topple", "@", "mat"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[10]:=",
 CellID->1666517005,ExpressionUUID->"7a077f70-1a50-4b3c-bb35-aa8e7f5d2a06"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    InterpretationBox[
     SubscriptBox["b", 
      TemplateBox[{",", "\",\"", "1"},
       "RowWithSeparators"]],
     $CellContext`b[1]], "\[Rule]", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.4191284361691052`", "\[VeryThinSpace]", "-", 
        RowBox[{"0.6117560686759916`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`a[1]]}], "-", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.168578059913452`", "\[VeryThinSpace]", "+", 
        RowBox[{"0.4919636264922742`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`a[2]]}], "+", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.4224341714848938`", "\[VeryThinSpace]", "+", 
        RowBox[{"0.034474122451396076`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "3"},
         "RowWithSeparators"]],
       $CellContext`a[3]]}]}]}], ",", 
   RowBox[{
    InterpretationBox[
     SubscriptBox["b", 
      TemplateBox[{",", "\",\"", "2"},
       "RowWithSeparators"]],
     $CellContext`b[2]], "\[Rule]", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.5861615594437507`", "\[VeryThinSpace]", "+", 
        RowBox[{"0.12627636363737033`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`a[1]]}], "-", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.2521003326969526`", "\[VeryThinSpace]", "-", 
        RowBox[{"0.587585682717477`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`a[2]]}], "+", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.21992710304705768`", "\[VeryThinSpace]", "-", 
        RowBox[{"0.4281231870406507`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "3"},
         "RowWithSeparators"]],
       $CellContext`a[3]]}]}]}], ",", 
   RowBox[{
    InterpretationBox[
     SubscriptBox["b", 
      TemplateBox[{",", "\",\"", "3"},
       "RowWithSeparators"]],
     $CellContext`b[3]], "\[Rule]", 
    RowBox[{
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"-", "0.2889187746613189`"}], "-", 
        RowBox[{"0.08414698032449486`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`a[1]]}], "+", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.4378678821476611`", "\[VeryThinSpace]", "+", 
        RowBox[{"0.35918440031191584`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`a[2]]}], "+", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"0.7418577137282683`", "\[VeryThinSpace]", "+", 
        RowBox[{"0.19583320527538056`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
      
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "3"},
         "RowWithSeparators"]],
       $CellContext`a[3]]}]}]}]}], "}"}]], "Output",
 CellLabel->"Out[10]=",
 CellID->2008043128,ExpressionUUID->"b9d692bb-98e4-4e01-8e19-1d3eec73f73e"]
}, Open  ]],

Cell[TextData[{
 "The basis for the ",
 StyleBox["b",
  FontSlant->"Italic"],
 "-modes can be rewritten as follows."
}], "ExampleText",
 CellID->116787747,ExpressionUUID->"5e95d3b6-cb9b-43c0-abe4-97f7aef5ece6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"bs2", "=", 
  RowBox[{"FockCat", "[", "bs", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[11]:=",
 CellID->614657339,ExpressionUUID->"5d05ae56-cab3-41eb-9c0f-c4d8e2be21d0"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   FractionBox[
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[1]]], 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[1]]], 
         InterpretationBox[
          TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
          Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      Q3`Dagger[
       $CellContext`b[1]], 
      Q3`Dagger[
       $CellContext`b[1]], 
      Ket[Q3`Vacuum]]], 
    SqrtBox["2"]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[1]]], 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[2]]], 
        InterpretationBox[
         TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
         Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[
      $CellContext`b[1]], 
     Q3`Dagger[
      $CellContext`b[2]], 
     Ket[Q3`Vacuum]]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[1]]], 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[3]]], 
        InterpretationBox[
         TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
         Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[
      $CellContext`b[1]], 
     Q3`Dagger[
      $CellContext`b[3]], 
     Ket[Q3`Vacuum]]], ",", 
   FractionBox[
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[2]]], 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[2]]], 
         InterpretationBox[
          TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
          Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      Q3`Dagger[
       $CellContext`b[2]], 
      Q3`Dagger[
       $CellContext`b[2]], 
      Ket[Q3`Vacuum]]], 
    SqrtBox["2"]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[2]]], 
        InterpretationBox[
         TemplateBox[{"b", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`b[3]]], 
        InterpretationBox[
         TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
         Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[
      $CellContext`b[2]], 
     Q3`Dagger[
      $CellContext`b[3]], 
     Ket[Q3`Vacuum]]], ",", 
   FractionBox[
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[3]]], 
         InterpretationBox[
          TemplateBox[{"b", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            
            TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
             "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
           SubsuperscriptBox], 
          Q3`Dagger[
           $CellContext`b[3]]], 
         InterpretationBox[
          TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
          Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      Q3`Dagger[
       $CellContext`b[3]], 
      Q3`Dagger[
       $CellContext`b[3]], 
      Ket[Q3`Vacuum]]], 
    SqrtBox["2"]]}], "}"}]], "Output",
 CellLabel->"Out[11]=",
 CellID->1321364231,ExpressionUUID->"5ec4e788-3793-4bae-ad48-6820a86b7783"]
}, Open  ]],

Cell[TextData[{
 "Rewrite the above basis in terms of the basis for the ",
 StyleBox["a",
  FontSlant->"Italic"],
 "-modes."
}], "ExampleText",
 CellID->1021926066,ExpressionUUID->"d4353539-2d3a-4805-8dff-56d4a10cec0e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"alt", "=", 
  RowBox[{"Garner", "@", 
   RowBox[{"FockKet", "[", 
    RowBox[{"bs2", "/.", "rls"}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[12]:=",
 CellID->333871968,ExpressionUUID->"cdf650c7-ce45-4ef8-807e-a894832324fb"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.17726216411933482`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.029126094710848555`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07672549636379374`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.30212385642739614`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.21360964750724648`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.16586854740410745`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.28021782929062594`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.34503640678037384`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.525546639610581`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.14575916533166222`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.19857684155634492`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.5128087287622562`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.15225974011508503`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.24504371127569796`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3744482159866003`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4689098975657298`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.035313109918374025`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4566881808087297`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.43227117110224145`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4336471929249818`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.15316149465089868`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.1455094829007073`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.39027440822804077`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.24405295588932305`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.20008211665616926`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"-", "0.13492153262717288`"}], "+", 
       RowBox[{"0.1883117845462479`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.27734900090780473`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3353892526419485`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2817023567886494`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.29626109220208396`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2587652357502606`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.31562101517000496`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.31391257076676105`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4420631156714773`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3276396537560523`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.14803670046113426`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.34930417922140045`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.38825459820187297`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.05201717903027547`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4545823323969493`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23579803799054827`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.22447430719765452`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.12134990038745953`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.5120022231297038`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.2905607478753449`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3599108937126206`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.4981041028617373`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.06271484878904743`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3145506253301126`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2798132531273661`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.16829845125673196`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.13616609523411616`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.19886724412884485`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07639334405406703`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.048623284893606324`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}]}], "}"}]], "Output",
 CellLabel->"Out[12]=",
 CellID->1974308329,ExpressionUUID->"35014662-949a-4222-a103-489c97d8f856"]
}, Open  ]],

Cell[TextData[{
 "Compare the above expressions with the ones obtained by using the unitary \
matrix from ",
 StyleBox["BosonTransform", "Input"],
 "."
}], "ExampleText",
 CellID->977125870,ExpressionUUID->"117b5044-7011-4f88-aa10-cc80c6d73e34"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"mint", "=", 
  RowBox[{"as", ".", "trs"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[13]:=",
 CellID->2127017166,ExpressionUUID->"7f2b3cac-dbc5-4b4a-a6e5-c6708fce712e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.17726216411933482`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.029126094710848555`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07672549636379375`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3021238564273962`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.21360964750724648`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.16586854740410745`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.280217829290626`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.3450364067803739`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.525546639610581`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.14575916533166222`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.19857684155634492`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.5128087287622562`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.152259740115085`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.24504371127569793`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3744482159866003`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.46890989756572976`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03531310991837402`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4566881808087296`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.43227117110224134`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.4336471929249817`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.15316149465089865`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.14550948290070728`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.3902744082280407`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.24405295588932302`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.20008211665616923`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"-", "0.13492153262717288`"}], "+", 
       RowBox[{"0.1883117845462479`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.27734900090780473`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3353892526419486`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2817023567886494`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.29626109220208396`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2587652357502606`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.315621015170005`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3139125707667611`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4420631156714774`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3276396537560523`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.14803670046113426`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3493041792214004`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.38825459820187286`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.05201717903027547`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.45458233239694923`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23579803799054824`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.2244743071976545`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.12134990038745952`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.5120022231297038`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.2905607478753449`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        2|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.35991089371262064`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.49810410286173734`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        1|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.06271484878904743`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3145506253301126`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 2, $CellContext`a[3] -> 
        0|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.27981325312736616`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.16829845125673198`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        1|>]]}], "-", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.13616609523411619`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.19886724412884488`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["1", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
        0|>]]}], "+", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{"0.07639334405406703`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.048623284893606324`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
     
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
          SubscriptBox["2", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
              $CellContext`a[1]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
              $CellContext`a[2]]}, "RowWithSeparators"]], 
          SubscriptBox["0", 
           TemplateBox[{",", "\",\"", 
             InterpretationBox[
              SubscriptBox["a", 
               TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
              $CellContext`a[3]]}, "RowWithSeparators"]]}, 
         "RowWithSeparators"]},
       "Ket"],
      Ket[<|$CellContext`a[1] -> 2, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
        0|>]]}]}]}], "}"}]], "Output",
 CellLabel->"Out[13]=",
 CellID->1668665545,ExpressionUUID->"f37b8b75-1d60-4990-b207-d24c6e1a6e42"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"mint", "-", "alt"}], "//", "Chop"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[14]:=",
 CellID->1423053347,ExpressionUUID->"44cb3d73-5bb2-4067-9ffe-36459655dfc1"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0"}], 
  "}"}]], "Output",
 CellLabel->"Out[14]=",
 CellID->1233776046,ExpressionUUID->"e3f9d12c-3bf6-423b-8184-ddf382cf9d32"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"tt", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "/@", "tt"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[15]:=",
 CellID->332562170,ExpressionUUID->"f909b921-e3f8-41f7-8440-1ca9e03504ed"],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"0", "\[Rule]", 
    TagBox[
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {"1"}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.7]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}], "\[NoBreak]", ")"}],
     Function[BoxForm`e$, 
      MatrixForm[BoxForm`e$]]]}], ",", 
   RowBox[{"1", "\[Rule]", 
    TagBox[
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {
         RowBox[{"0.4191284361691052`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.6117560686759916`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.5861615594437507`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.12627636363737033`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.2889187746613189`"}], "+", 
          RowBox[{"0.08414698032449486`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{
          RowBox[{"-", "0.168578059913452`"}], "+", 
          RowBox[{"0.4919636264922742`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.2521003326969526`"}], "-", 
          RowBox[{"0.587585682717477`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.4378678821476611`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.35918440031191584`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{"0.4224341714848938`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.034474122451396076`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.21992710304705768`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.4281231870406507`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.7418577137282683`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.19583320527538056`", " ", "\[ImaginaryI]"}]}]}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.7]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}], "\[NoBreak]", ")"}],
     Function[BoxForm`e$, 
      MatrixForm[BoxForm`e$]]]}], ",", 
   RowBox[{"2", "\[Rule]", 
    TagBox[
     RowBox[{"(", "\[NoBreak]", GridBox[{
        {
         RowBox[{
          RowBox[{"-", "0.19857684155634492`"}], "+", 
          RowBox[{"0.5128087287622562`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.4566881808087296`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.43227117110224134`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.24405295588932302`"}], "-", 
          RowBox[{"0.20008211665616923`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.3276396537560523`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.14803670046113426`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.2244743071976545`"}], "+", 
          RowBox[{"0.12134990038745952`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.07639334405406703`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.048623284893606324`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{
          RowBox[{"-", "0.525546639610581`"}], "+", 
          RowBox[{"0.14575916533166222`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.3139125707667611`"}], "-", 
          RowBox[{"0.4420631156714774`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.13616609523411619`"}], "+", 
          RowBox[{"0.19886724412884488`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{"0.280217829290626`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.3450364067803739`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.2587652357502606`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.315621015170005`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.27981325312736616`"}], "+", 
          RowBox[{"0.16829845125673198`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{
          RowBox[{"-", "0.21360964750724648`"}], "-", 
          RowBox[{"0.16586854740410745`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.46890989756572976`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.03531310991837402`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.14550948290070728`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.3902744082280407`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.2817023567886494`"}], "+", 
          RowBox[{"0.29626109220208396`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.45458233239694923`"}], "-", 
          RowBox[{"0.23579803799054824`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.06271484878904743`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.3145506253301126`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{
          RowBox[{"-", "0.07672549636379375`"}], "+", 
          RowBox[{"0.3021238564273962`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.3744482159866003`"}], "-", 
          RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.27734900090780473`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.3353892526419486`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.05201717903027547`"}], "-", 
          RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.35991089371262064`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.49810410286173734`", " ", "\[ImaginaryI]"}]}]},
        {
         RowBox[{"0.17726216411933482`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.029126094710848555`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.152259740115085`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.24504371127569793`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.4336471929249817`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.15316149465089865`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{
          RowBox[{"-", "0.13492153262717288`"}], "+", 
          RowBox[{"0.1883117845462479`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.3493041792214004`", "\[VeryThinSpace]", "+", 
          RowBox[{"0.38825459820187286`", " ", "\[ImaginaryI]"}]}], 
         RowBox[{"0.5120022231297038`", "\[VeryThinSpace]", "-", 
          RowBox[{"0.2905607478753449`", " ", "\[ImaginaryI]"}]}]}
       },
       GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
       GridBoxSpacings->{"Columns" -> {
           Offset[0.27999999999999997`], {
            Offset[0.7]}, 
           Offset[0.27999999999999997`]}, "Rows" -> {
           Offset[0.2], {
            Offset[0.4]}, 
           Offset[0.2]}}], "\[NoBreak]", ")"}],
     Function[BoxForm`e$, 
      MatrixForm[BoxForm`e$]]]}]}], "\[RightAssociation]"}]], "Output",
 CellLabel->"Out[15]=",
 CellID->800955407,ExpressionUUID->"465a50b9-d83a-4937-aa86-81b523474271"]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"a5b04162-6136-4d41-9129-758a581815f2"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"2c4c51dc-052a-471f-a109-66d55825a917"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "c05c1b24-f6ef-4c54-9b82-0b58948c724d"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1094006675,ExpressionUUID->"f2881dc1-cecb-4754-a179-9131123bd344"],

Cell["\<\
If you are sure, say based on certain physical grounds, that some many-body \
basis states are more relevant than others, you can restrict the involved \
basis states in several ways by adjusting the input arguments.\
\>", "ExampleText",
 CellID->1293372040,ExpressionUUID->"ba73ca7a-4a08-4b8f-921b-e697304f1cb6"],

Cell["\<\
Let us examine examples by considering two sets of bosonic modes related by a \
canonical transformation.\
\>", "ExampleText",
 CellID->998156305,ExpressionUUID->"2f23b915-ea23-4dfa-9766-30d76b266089"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"$m", "=", "3"}], ";"}], 
  RowBox[{"(*", " ", 
   RowBox[{"the", " ", "number", " ", "of", " ", "modes"}], " ", 
   "*)"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1933974453,ExpressionUUID->"ebb98ba8-bfac-41b1-9970-942b87b04e71"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Boson", ",", "a", ",", "b"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->2143634226,ExpressionUUID->"9f050ddf-a5cf-4856-966b-326098fa3959"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"aa", "=", 
  RowBox[{"a", "[", 
   RowBox[{"Range", "@", "$m"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bb", "=", 
  RowBox[{"b", "[", 
   RowBox[{"Range", "@", "$m"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1874774310,ExpressionUUID->"997beef0-f28c-405d-91e4-8cb81a937336"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`a[1]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`a[2]], ",", 
   InterpretationBox[
    SubscriptBox["a", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`a[3]]}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1998633213,ExpressionUUID->"074828ec-fe36-40fd-bfee-2e3e680025c7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`b[1]], ",", 
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`b[2]], ",", 
   InterpretationBox[
    SubscriptBox["b", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`b[3]]}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->89204517,ExpressionUUID->"9f186295-1d59-432d-a2b9-afcb1af8960b"]
}, Open  ]],

Cell["To be specific, choose a canonical transformation.", "ExampleText",
 CellID->1182235068,ExpressionUUID->"1ad8edae-76f7-4e32-b7f6-5638f0614883"],

Cell[BoxData[
 RowBox[{
  RowBox[{"SeedRandom", "[", "351", "]"}], ";"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1306085832,ExpressionUUID->"737d61fc-6e3e-453d-8282-c97f1ff1cfcc"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{"RandomUnitary", "[", "$m", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1954222437,ExpressionUUID->"547eda93-de49-43a3-a8e0-10e066bb1798"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.4191284361691052`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.6117560686759916`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.5861615594437507`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.12627636363737033`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2889187746613189`"}], "+", 
       RowBox[{"0.08414698032449486`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.168578059913452`"}], "+", 
       RowBox[{"0.4919636264922742`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.2521003326969526`"}], "-", 
       RowBox[{"0.587585682717477`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.4378678821476611`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.35918440031191584`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.4224341714848938`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.034474122451396076`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.21992710304705768`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4281231870406507`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.7418577137282683`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.19583320527538056`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[5]//MatrixForm=",
 CellID->349067094,ExpressionUUID->"294158e3-be44-4ef5-b18e-d28ae8ab1367"]
}, Open  ]],

Cell[TextData[{
 "Suppose that you are interested in the subspace of ",
 StyleBox["n",
  FontSlant->"Italic"],
 " particles."
}], "ExampleText",
 CellID->1938593701,ExpressionUUID->"4c3a9c59-e0df-4170-a2e0-35cc1bdbc897"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$n", "=", "2"}], ";"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->322440423,ExpressionUUID->"b5f0f2ca-d909-42f4-92db-d409cee33195"],

Cell["\<\
Restrict the relevant many-body basis states by allowing only  0 or 1 for the \
occupation numbers.\
\>", "ExampleText",
 CellID->1154947980,ExpressionUUID->"0fc770b6-a29c-496a-a359-828f0bd93f51"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"as", "=", 
  RowBox[{"BosonBasis", "[", 
   RowBox[{"aa", ",", 
    RowBox[{"{", "$n", "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"bs", "=", 
  RowBox[{"BosonBasis", "[", 
   RowBox[{"bb", ",", 
    RowBox[{"{", "$n", "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}]}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->106014627,ExpressionUUID->"80cbb7b6-eebc-4e8c-a6bc-ce42608585b7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 1, $CellContext`a[2] -> 0, $CellContext`a[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`a[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`a[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["a", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`a[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`a[1] -> 0, $CellContext`a[2] -> 1, $CellContext`a[3] -> 
      1|>]]}], "}"}]], "Output",
 CellLabel->"Out[7]=",
 CellID->562649959,ExpressionUUID->"2dded5ae-b656-4557-aaa1-e4e978761d17"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 1, $CellContext`b[2] -> 1, $CellContext`b[3] -> 
      0|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 1, $CellContext`b[2] -> 0, $CellContext`b[3] -> 
      1|>]], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`b[1]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`b[2]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["b", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`b[3]]}, "RowWithSeparators"]]}, "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`b[1] -> 0, $CellContext`b[2] -> 1, $CellContext`b[3] -> 
      1|>]]}], "}"}]], "Output",
 CellLabel->"Out[7]=",
 CellID->1087363172,ExpressionUUID->"6748ba3f-1433-426f-aab1-17e1eefcd345"]
}, Open  ]],

Cell[TextData[{
 "Calculate the unitary transformation matrix ",
 Cell[BoxData[
  FormBox["T", TraditionalForm]],ExpressionUUID->
  "29cf53f2-39bb-467a-9500-759b7eaff5e2"],
 " between these bases: ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    SubscriptBox[
     TemplateBox[{"j"},
      "Ket"], "b"], ":=", 
    RowBox[{
     UnderscriptBox["\[Sum]", "i"], 
     RowBox[{
      SubscriptBox[
       TemplateBox[{"i"},
        "Ket"], "a"], 
      SubscriptBox["T", 
       RowBox[{"i", "\[VeryThinSpace]", "j"}]]}]}]}], TraditionalForm]],
  ExpressionUUID->"ecc71c8f-35d3-4f68-8194-405e898d4283"],
 "."
}], "ExampleText",
 CellID->841215019,ExpressionUUID->"9b8f942e-0e42-40de-960b-7b37f14f0825"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", 
     RowBox[{"{", "$n", "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"trs", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->1415976132,ExpressionUUID->"e09f9217-1618-472f-aedb-3022a0fbb3f2"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.3744482159866003`"}], "-", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.05201717903027547`"}], "-", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[8]//MatrixForm=",
 CellID->1430468261,ExpressionUUID->"e0763bc0-0877-42bf-9210-f7524149169b"]
}, Open  ]],

Cell[TextData[{
 "You can restrict the states more directly by giving custom bases as input \
arguments. In this particular case, the following three statements are \
equivalent because the bases for the two sets of bosonic modes (",
 StyleBox["a",
  FontSlant->"Italic"],
 "- and ",
 StyleBox["b",
  FontSlant->"Italic"],
 "-modes) are essentially the same (the keys of Kets in the basis are \
ignored, only occupation numbers are considered)."
}], "ExampleText",
 CellID->799020092,ExpressionUUID->"2f860d33-6a35-4ab4-a27e-3ed1ba9ae052"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", "as"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", "bs"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", 
     RowBox[{"{", 
      RowBox[{"as", ",", "bs"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"trs", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[9]:=",
 CellID->174508983,ExpressionUUID->"92be8731-5f50-42e4-b9b6-34f999619775"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.3744482159866003`"}], "-", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.05201717903027547`"}], "-", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[9]//MatrixForm=",
 CellID->498639845,ExpressionUUID->"e3969fbc-9492-4bdd-8ea7-40b35db500a9"]
}, Open  ]],

Cell["\<\
The same result can be obtained by specifying the occupation numbers as well.\
\
\>", "ExampleText",
 CellID->420673980,ExpressionUUID->"2adcb34c-56cc-42f8-95c2-1c46f952e721"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"alist", "=", 
  RowBox[{"OrderedPartitions", "[", 
   RowBox[{"$n", ",", "$m", ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"blist", "=", 
  RowBox[{"OrderedPartitions", "[", 
   RowBox[{"$n", ",", "$m", ",", 
    RowBox[{"{", 
     RowBox[{"0", ",", "1"}], "}"}]}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[10]:=",
 CellID->195611649,ExpressionUUID->"25225827-9f79-45ba-838b-17dd875d6974"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1"}], "}"}]}], "}"}]], "Output",
 CellLabel->"Out[10]=",
 CellID->1585751281,ExpressionUUID->"d1d14d76-e5c7-4b9a-8b27-c6f96dc78a17"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "0"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "0", ",", "1"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "1"}], "}"}]}], "}"}]], "Output",
 CellLabel->"Out[10]=",
 CellID->1449720497,ExpressionUUID->"291de296-da2c-435b-a723-2a4b3da123fa"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", "alist"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", "blist"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"trs", "=", 
   RowBox[{"BosonTransform", "[", 
    RowBox[{"mat", ",", 
     RowBox[{"{", 
      RowBox[{"alist", ",", "blist"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"trs", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[11]:=",
 CellID->858218400,ExpressionUUID->"8d19dc04-8845-46e3-b935-efccb36f91b9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"0.2171060883769842`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0908401858661016`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.41056423026395295`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.03899892465170096`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.333584900780444`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.1172813984018854`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.07353215085545262`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2404294853996061`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.31158754529353894`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.4172634745228263`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.3105530267991724`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.3136556164119837`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{
       RowBox[{"-", "0.3744482159866003`"}], "-", 
       RowBox[{"0.2035013744120169`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.14386966875864976`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.23115331745622814`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{
       RowBox[{"-", "0.05201717903027547`"}], "-", 
       RowBox[{"0.2780683464097147`", " ", "\[ImaginaryI]"}]}]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[11]//MatrixForm=",
 CellID->987493737,ExpressionUUID->"d875a18c-60a8-414d-b601-0609b1766dce"]
}, Open  ]],

Cell["\<\
Note that in this case, the resulting matrix is not unitary any longer \
because is only an approximation (in this random example, it is a very bad \
approximation).\
\>", "ExampleText",
 CellID->473559800,ExpressionUUID->"9eaad06e-0df9-40be-8931-e16b3f184115"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"trs", ".", 
    RowBox[{"Topple", "[", "trs", "]"}]}], "//", "Chop"}], "//", 
  "MatrixForm"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Topple", "[", "trs", "]"}], ".", "trs"}], "//", "Chop"}], "//", 
  "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[12]:=",
 CellID->1002436772,ExpressionUUID->"48d77c00-6236-4cb6-97b7-dbf581cd9a0b"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.3505047087145644`", 
      RowBox[{"0.2461592623325073`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.17413473137340568`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.0025042232173008022`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.07654233593428554`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.2461592623325073`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.17413473137340568`", " ", "\[ImaginaryI]"}]}], 
      "0.5292319483727719`", 
      RowBox[{"0.13588172609088384`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.015613011963466802`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.0025042232173008022`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.07654233593428554`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.13588172609088384`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.015613011963466802`", " ", "\[ImaginaryI]"}]}], 
      "0.3357824057921718`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[12]//MatrixForm=",
 CellID->1666980656,ExpressionUUID->"4f413593-6f80-4c7a-b93e-54f32fc9f397"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.30022458348061876`", 
      RowBox[{"0.11500104986133311`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.07268099742394041`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.10656578111151085`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.0006471610270881029`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.11500104986133311`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.07268099742394041`", " ", "\[ImaginaryI]"}]}], 
      "0.5154098466088791`", 
      RowBox[{"0.03565918436307264`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.2904373706124817`", " ", "\[ImaginaryI]"}]}]},
     {
      RowBox[{"0.10656578111151085`", "\[VeryThinSpace]", "-", 
       RowBox[{"0.0006471610270881029`", " ", "\[ImaginaryI]"}]}], 
      RowBox[{"0.03565918436307264`", "\[VeryThinSpace]", "+", 
       RowBox[{"0.2904373706124817`", " ", "\[ImaginaryI]"}]}], 
      "0.3998846327900102`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellLabel->"Out[12]//MatrixForm=",
 CellID->872226630,ExpressionUUID->"dc059b8d-173f-4b96-876b-ca2d448cf5c9"]
}, Open  ]],

Cell["\<\
Therefore, the restriction must be used only when one is convinced that there \
is certain physical reasons to restrict the bases.\
\>", "ExampleText",
 CellID->529714649,ExpressionUUID->"7aec6f39-4ab5-4206-a13f-080606c9b8af"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["BosonBasis"]], "paclet:Q3/ref/BosonBasis", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "e85856a8-11cf-4bae-ae40-b35ebbecae12"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["MatrixIn"]], "paclet:Q3/ref/MatrixIn", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "2c963fe6-06bc-4020-b2f0-db89caf16a77"]
       }], "SeeAlso",ExpressionUUID->"0ba03148-4ffa-49b4-848c-2e07c2cca3a5"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"3b57a91b-2862-470d-9c39-\
11ae6cb83c50"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTechNote.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Tech", " ", "Notes"}], "TechNotesSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Many-Body Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumManyBodySystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "b71e4b2a-bbcd-435f-bf43-08cbb63fa9e0"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "eb6d41b3-5165-45cd-b346-57f6faa2198a"]}]}
     }]}
  }]], "TechNotesSection",ExpressionUUID->"c7bf39c3-4b08-4d48-a547-\
31fcfc1f701f"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Many-Body Systems"]], 
           "paclet:Q3/guide/QuantumManyBodySystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "9cfa8b7c-4eee-4d02-a5f2-a083f43283eb"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3"]], "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "01afa538-6a38-4f31-9d2c-2661818699f1"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"69538518-3178-415c-acfb-\
3253b5083cd0"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "8df10bf6-ba38-42c6-9cf0-ed2c436d31bb"]}]],ExpressionUUID->
         "1bb9e497-c7ec-4f3f-98fe-e5e380813c29"],
        ", A Quantum Computation Workbook (Springer)."
       }], "RelatedLinks",ExpressionUUID->
        "5257a17b-8835-47dd-bce9-e2e102357f67"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"f416cf2f-c9d6-4570-94b0-\
df3c971fb491"],

Cell[" ", "FooterCell",ExpressionUUID->"daee2ce2-06dd-4d92-9fd4-6b8774092378"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"BosonTransform",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed}, "AllOptsTable" -> 
    Closed, "NotesSection" -> Closed}, "NewStyles" -> True, 
  "CitationPopupData" -> $Failed, "ShowCitation" -> False, "HasOptions" -> 
  True, "RootCaptions" -> "", "HeaderCoreAreaLink" -> {}, 
  "Metadata" -> {
   "built" -> "{2024, 7, 21, 12, 0, 24.958881}", 
    "history" -> {"14.0", "", "", ""}, "context" -> "Q3`", "keywords" -> {}, 
    "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> True,
     "label" -> "Q3 Symbol", "language" -> "en", "paclet" -> "Q3", "status" -> 
    "None", "summary" -> 
    "BosonTransform[mat, {n}] returns the unitary matrix describing the \
change of n-particle basis between two sets of modes related by the canonical \
transformation matrix mat. BosonTransform[mat, {m, n}] returns an association \
whose keys are the numbers from m to n and the values are the unitary \
matrices corresponding to the numbers of particles. BosonTransform[mat, n] is \
equivalent to BosonTransform[mat, {0, n}]. BosonTransform[mat, nspec, {k1, \
k2, ...}] assumes that the basis states only have occupation numbers in {k1, \
k2, ...}. BosonTransform[mat, {{p11, p12, ...}, {p21, p22, ...}, ...}] refers \
to pij for the occupation number of j-th mode in the i-th many-body basis \
state for the both sets of boson modes. BosonTransform[mat, {pmat, qmat}] \
refers to pmat and qmat for the occupation numbers of the first and second \
set of boson modes, respectively. BosonTransform[mat, bs] or \
BosonTransform[mat, {bsa, bsb}] refers to the same basis bs or respective \
bases bsa and bsb for the occupation numbers of the two sets of boson modes.",
     "synonyms" -> {}, "tabletags" -> {}, "title" -> "BosonTransform", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "BosonTransform", "type" -> "Symbol", "uri" -> "Q3/ref/BosonTransform"}},
FrontEndVersion->"14.0 for Mac OS X ARM (64-bit) (December 12, 2023)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "Reference.nb", 
  CharacterEncoding -> "UTF-8"],
ExpressionUUID->"47d2812c-69ae-49f5-a89b-b39f484587e7"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[22667, 625, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"bd284b59-1c0b-4f4d-8198-901524e13c8c",
   CellTags->"PrimaryExamplesSection",
   CellID->1231756231]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 198528, 5070}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[586, 21, 6801, 169, 57, "AnchorBarGrid",ExpressionUUID->"8f680c25-a1fa-46c5-b115-3848b91f12ea",
 CellID->1],
Cell[7390, 192, 85, 0, 23, "ContextNameCell",ExpressionUUID->"b4e235be-da11-4667-ba0c-254803242329"],
Cell[CellGroupData[{
Cell[7500, 196, 1388, 38, 60, "ObjectNameGrid",ExpressionUUID->"fc065d3f-e3a8-45ee-889a-00412cb6121c"],
Cell[8891, 236, 9759, 270, 630, "Usage",ExpressionUUID->"c48acd75-44e1-469a-8f3d-edf6c1939750",
 CellID->1362242420]
}, Open  ]],
Cell[CellGroupData[{
Cell[18687, 511, 1898, 47, 37, "NotesSection",ExpressionUUID->"d719181e-5e30-41d8-80e4-0a0c91d35de6",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->506438356],
Cell[20588, 560, 1952, 59, 70, "Notes",ExpressionUUID->"ef331946-a381-4388-aada-56c82d96a858",
 CellID->885192273]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[22667, 625, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"bd284b59-1c0b-4f4d-8198-901524e13c8c",
 CellTags->"PrimaryExamplesSection",
 CellID->1231756231],
Cell[24060, 664, 191, 3, 31, "Input",ExpressionUUID->"00427fec-d980-430f-ad78-6086f51e28f7",
 CellID->246560494],
Cell[CellGroupData[{
Cell[24276, 671, 1367, 36, 31, "ExampleSection",ExpressionUUID->"f347e3e3-6d1c-4ef8-be5a-07ac9344cc55",
 CellID->384617337],
Cell[25646, 709, 301, 7, 70, "ExampleText",ExpressionUUID->"3dec2cbe-9e06-4520-bcce-d966a334f4b9",
 CellID->899584544],
Cell[25950, 718, 307, 9, 70, "Input",ExpressionUUID->"1041fbe5-32b0-4a74-b159-54d85765ce2d",
 CellID->766874085],
Cell[26260, 729, 218, 5, 70, "Input",ExpressionUUID->"70ecfc12-2a1b-43c9-9628-1471db51765f",
 CellID->652243378],
Cell[CellGroupData[{
Cell[26503, 738, 343, 9, 70, "Input",ExpressionUUID->"2d8e2ff2-2657-4e3a-8428-2a3e82a97dde",
 CellID->1535286693],
Cell[26849, 749, 578, 19, 37, "Output",ExpressionUUID->"136cefa9-ac2f-41c8-83c5-f70529bac4b4",
 CellID->2064056772],
Cell[27430, 770, 577, 19, 37, "Output",ExpressionUUID->"6555c06e-7967-48f1-8b02-2294630121c2",
 CellID->151333366]
}, Open  ]],
Cell[28022, 792, 997, 30, 70, "ExampleText",ExpressionUUID->"4e9d5460-1245-49be-bc67-301b8e400446",
 CellID->629436858],
Cell[29022, 824, 209, 5, 70, "Input",ExpressionUUID->"392661d2-0bd6-42b7-9d57-1338cdf3a60a",
 CellID->1888739657],
Cell[CellGroupData[{
Cell[29256, 833, 302, 8, 70, "Input",ExpressionUUID->"11dddbc4-a412-4853-81e5-b8cff81ba8d4",
 CellID->11107004],
Cell[29561, 843, 1745, 39, 82, "Output",ExpressionUUID->"a665f73a-aee9-477b-8d1a-fed47fdc42b0",
 CellID->393314979]
}, Open  ]],
Cell[31321, 885, 219, 6, 70, "ExampleText",ExpressionUUID->"3e1113ef-c80f-4497-a811-9340791c93dd",
 CellID->538544441],
Cell[31543, 893, 193, 5, 70, "Input",ExpressionUUID->"f1834c2c-8194-41c5-af96-fc5812948147",
 CellID->554860242],
Cell[31739, 900, 181, 3, 70, "ExampleText",ExpressionUUID->"1c48075f-5edf-481d-be46-519cb52c000e",
 CellID->1920304077],
Cell[CellGroupData[{
Cell[31945, 907, 405, 11, 70, "Input",ExpressionUUID->"e3a17528-bb2d-4c43-a524-3bf2c3b4be7d",
 CellID->1633870097],
Cell[32353, 920, 6122, 148, 41, "Output",ExpressionUUID->"ec585336-2c20-4847-b111-bb6e752c0baa",
 CellID->1941762198],
Cell[38478, 1070, 6122, 148, 41, "Output",ExpressionUUID->"72279aec-75c7-4a6b-b968-45c59b72169b",
 CellID->2035761974]
}, Open  ]],
Cell[44615, 1221, 696, 23, 70, "ExampleText",ExpressionUUID->"8a51be32-5070-49a2-8e9c-6ec1fb0caa77",
 CellID->2129672373],
Cell[CellGroupData[{
Cell[45336, 1248, 355, 9, 70, "Input",ExpressionUUID->"b363ed2d-e700-47f3-8994-746a191a4a51",
 CellID->1631252586],
Cell[45694, 1259, 5286, 107, 134, "Output",ExpressionUUID->"c5fc2ba8-8ae5-437d-919a-3d72a968a3bb",
 CellID->991264631]
}, Open  ]],
Cell[CellGroupData[{
Cell[51017, 1371, 433, 13, 70, "Input",ExpressionUUID->"961c4214-2e84-4dff-867d-791aaf17de9f",
 CellID->1586342386],
Cell[51453, 1386, 854, 21, 134, "Output",ExpressionUUID->"c4961182-cad6-47d8-b866-93d489c83bd1",
 CellID->4860437],
Cell[52310, 1409, 823, 21, 134, "Output",ExpressionUUID->"98ac2a8a-dbce-46be-b570-adbab965bd95",
 CellID->84986073]
}, Open  ]],
Cell[53148, 1433, 207, 4, 70, "ExampleText",ExpressionUUID->"5d3caf54-fc90-40b5-a799-c87929e2e3de",
 CellID->1291576865],
Cell[CellGroupData[{
Cell[53380, 1441, 300, 8, 70, "Input",ExpressionUUID->"7a077f70-1a50-4b3c-bb35-aa8e7f5d2a06",
 CellID->1666517005],
Cell[53683, 1451, 3751, 111, 72, "Output",ExpressionUUID->"b9d692bb-98e4-4e01-8e19-1d3eec73f73e",
 CellID->2008043128]
}, Open  ]],
Cell[57449, 1565, 210, 6, 70, "ExampleText",ExpressionUUID->"5e95d3b6-cb9b-43c0-abe4-97f7aef5ece6",
 CellID->116787747],
Cell[CellGroupData[{
Cell[57684, 1575, 212, 5, 70, "Input",ExpressionUUID->"5d05ae56-cab3-41eb-9c0f-c4d8e2be21d0",
 CellID->614657339],
Cell[57899, 1582, 6600, 184, 62, "Output",ExpressionUUID->"5ec4e788-3793-4bae-ad48-6820a86b7783",
 CellID->1321364231]
}, Open  ]],
Cell[64514, 1769, 219, 6, 70, "ExampleText",ExpressionUUID->"d4353539-2d3a-4805-8dff-56d4a10cec0e",
 CellID->1021926066],
Cell[CellGroupData[{
Cell[64758, 1779, 270, 7, 70, "Input",ExpressionUUID->"cdf650c7-ce45-4ef8-807e-a894832324fb",
 CellID->333871968],
Cell[65031, 1788, 44473, 1058, 301, "Output",ExpressionUUID->"35014662-949a-4222-a103-489c97d8f856",
 CellID->1974308329]
}, Open  ]],
Cell[109519, 2849, 245, 6, 70, "ExampleText",ExpressionUUID->"117b5044-7011-4f88-aa10-cc80c6d73e34",
 CellID->977125870],
Cell[CellGroupData[{
Cell[109789, 2859, 205, 5, 70, "Input",ExpressionUUID->"7f2b3cac-dbc5-4b4a-a6e5-c6708fce712e",
 CellID->2127017166],
Cell[109997, 2866, 44460, 1057, 301, "Output",ExpressionUUID->"f37b8b75-1d60-4990-b207-d24c6e1a6e42",
 CellID->1668665545]
}, Open  ]],
Cell[CellGroupData[{
Cell[154494, 3928, 208, 5, 70, "Input",ExpressionUUID->"44cb3d73-5bb2-4067-9ffe-36459655dfc1",
 CellID->1423053347],
Cell[154705, 3935, 216, 5, 37, "Output",ExpressionUUID->"e3f9d12c-3bf6-423b-8184-ddf382cf9d32",
 CellID->1233776046]
}, Open  ]],
Cell[CellGroupData[{
Cell[154958, 3945, 327, 8, 70, "Input",ExpressionUUID->"f909b921-e3f8-41f7-8440-1ca9e03504ed",
 CellID->332562170],
Cell[155288, 3955, 7962, 163, 121, "Output",ExpressionUUID->"465a50b9-d83a-4937-aa86-81b523474271",
 CellID->800955407]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[163399, 4126, 1394, 36, 70, "ExampleSection",ExpressionUUID->"f2881dc1-cecb-4754-a179-9131123bd344",
 CellID->1094006675],
Cell[164796, 4164, 323, 5, 70, "ExampleText",ExpressionUUID->"ba73ca7a-4a08-4b8f-921b-e697304f1cb6",
 CellID->1293372040],
Cell[165122, 4171, 211, 4, 70, "ExampleText",ExpressionUUID->"2f23b915-ea23-4dfa-9766-30d76b266089",
 CellID->998156305],
Cell[165336, 4177, 308, 9, 70, "Input",ExpressionUUID->"ebb98ba8-bfac-41b1-9970-942b87b04e71",
 CellID->1933974453],
Cell[165647, 4188, 219, 5, 70, "Input",ExpressionUUID->"9f050ddf-a5cf-4856-966b-326098fa3959",
 CellID->2143634226],
Cell[CellGroupData[{
Cell[165891, 4197, 343, 9, 70, "Input",ExpressionUUID->"997beef0-f28c-405d-91e4-8cb81a937336",
 CellID->1874774310],
Cell[166237, 4208, 578, 19, 37, "Output",ExpressionUUID->"074828ec-fe36-40fd-bfee-2e3e680025c7",
 CellID->1998633213],
Cell[166818, 4229, 576, 19, 37, "Output",ExpressionUUID->"9f186295-1d59-432d-a2b9-afcb1af8960b",
 CellID->89204517]
}, Open  ]],
Cell[167409, 4251, 149, 1, 70, "ExampleText",ExpressionUUID->"1ad8edae-76f7-4e32-b7f6-5638f0614883",
 CellID->1182235068],
Cell[167561, 4254, 209, 5, 70, "Input",ExpressionUUID->"737d61fc-6e3e-453d-8282-c97f1ff1cfcc",
 CellID->1306085832],
Cell[CellGroupData[{
Cell[167795, 4263, 304, 8, 70, "Input",ExpressionUUID->"547eda93-de49-43a3-a8e0-10e066bb1798",
 CellID->1954222437],
Cell[168102, 4273, 1745, 39, 82, "Output",ExpressionUUID->"294158e3-be44-4ef5-b18e-d28ae8ab1367",
 CellID->349067094]
}, Open  ]],
Cell[169862, 4315, 220, 6, 70, "ExampleText",ExpressionUUID->"4c3a9c59-e0df-4170-a2e0-35cc1bdbc897",
 CellID->1938593701],
Cell[170085, 4323, 193, 5, 70, "Input",ExpressionUUID->"b5f0f2ca-d909-42f4-92db-d409cee33195",
 CellID->322440423],
Cell[170281, 4330, 206, 4, 70, "ExampleText",ExpressionUUID->"0fc770b6-a29c-496a-a359-828f0bd93f51",
 CellID->1154947980],
Cell[CellGroupData[{
Cell[170512, 4338, 526, 15, 70, "Input",ExpressionUUID->"80cbb7b6-eebc-4e8c-a6bc-ce42608585b7",
 CellID->106014627],
Cell[171041, 4355, 3136, 76, 41, "Output",ExpressionUUID->"2dded5ae-b656-4557-aaa1-e4e978761d17",
 CellID->562649959],
Cell[174180, 4433, 3137, 76, 41, "Output",ExpressionUUID->"6748ba3f-1433-426f-aab1-17e1eefcd345",
 CellID->1087363172]
}, Open  ]],
Cell[177332, 4512, 695, 23, 70, "ExampleText",ExpressionUUID->"9b8f942e-0e42-40de-960b-7b37f14f0825",
 CellID->841215019],
Cell[CellGroupData[{
Cell[178052, 4539, 418, 11, 70, "Input",ExpressionUUID->"e09f9217-1618-472f-aedb-3022a0fbb3f2",
 CellID->1415976132],
Cell[178473, 4552, 1744, 38, 82, "Output",ExpressionUUID->"e0763bc0-0877-42bf-9210-f7524149169b",
 CellID->1430468261]
}, Open  ]],
Cell[180232, 4593, 539, 12, 70, "ExampleText",ExpressionUUID->"2f860d33-6a35-4ab4-a27e-3ed1ba9ae052",
 CellID->799020092],
Cell[CellGroupData[{
Cell[180796, 4609, 665, 19, 70, "Input",ExpressionUUID->"92be8731-5f50-42e4-b9b6-34f999619775",
 CellID->174508983],
Cell[181464, 4630, 1743, 38, 82, "Output",ExpressionUUID->"e3969fbc-9492-4bdd-8ea7-40b35db500a9",
 CellID->498639845]
}, Open  ]],
Cell[183222, 4671, 185, 4, 70, "ExampleText",ExpressionUUID->"2adcb34c-56cc-42f8-95c2-1c46f952e721",
 CellID->420673980],
Cell[CellGroupData[{
Cell[183432, 4679, 497, 13, 70, "Input",ExpressionUUID->"25225827-9f79-45ba-838b-17dd875d6974",
 CellID->195611649],
Cell[183932, 4694, 360, 10, 37, "Output",ExpressionUUID->"d1d14d76-e5c7-4b9a-8b27-c6f96dc78a17",
 CellID->1585751281],
Cell[184295, 4706, 360, 10, 37, "Output",ExpressionUUID->"291de296-da2c-435b-a723-2a4b3da123fa",
 CellID->1449720497]
}, Open  ]],
Cell[CellGroupData[{
Cell[184692, 4721, 678, 19, 70, "Input",ExpressionUUID->"8d19dc04-8845-46e3-b935-efccb36f91b9",
 CellID->858218400],
Cell[185373, 4742, 1744, 38, 82, "Output",ExpressionUUID->"d875a18c-60a8-414d-b601-0609b1766dce",
 CellID->987493737]
}, Open  ]],
Cell[187132, 4783, 271, 5, 70, "ExampleText",ExpressionUUID->"9eaad06e-0df9-40be-8931-e16b3f184115",
 CellID->473559800],
Cell[CellGroupData[{
Cell[187428, 4792, 434, 13, 70, "Input",ExpressionUUID->"48d77c00-6236-4cb6-97b7-dbf581cd9a0b",
 CellID->1002436772],
Cell[187865, 4807, 1448, 32, 82, "Output",ExpressionUUID->"4f413593-6f80-4c7a-b93e-54f32fc9f397",
 CellID->1666980656],
Cell[189316, 4841, 1446, 32, 82, "Output",ExpressionUUID->"dc059b8d-173f-4b96-876b-ca2d448cf5c9",
 CellID->872226630]
}, Open  ]],
Cell[190777, 4876, 236, 4, 70, "ExampleText",ExpressionUUID->"7aec6f39-4ab5-4206-a13f-080606c9b8af",
 CellID->529714649]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[191243, 4888, 1331, 36, 70, "SeeAlsoSection",ExpressionUUID->"3b57a91b-2862-470d-9c39-11ae6cb83c50"],
Cell[192577, 4926, 1084, 28, 70, "TechNotesSection",ExpressionUUID->"c7bf39c3-4b08-4d48-a547-31fcfc1f701f"],
Cell[193664, 4956, 1040, 27, 70, "MoreAboutSection",ExpressionUUID->"69538518-3178-415c-acfb-3253b5083cd0"],
Cell[194707, 4985, 1166, 34, 70, "RelatedLinksSection",ExpressionUUID->"f416cf2f-c9d6-4570-94b0-df3c971fb491"],
Cell[195876, 5021, 78, 0, 70, "FooterCell",ExpressionUUID->"daee2ce2-06dd-4d92-9fd4-6b8774092378"]
}
]
*)

(* End of internal cache information *)

